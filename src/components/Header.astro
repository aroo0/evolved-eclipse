---
import HeaderLink from './HeaderLink.astro';
import {frontmatter} from '../info/about-data.md'
---

<header>
	<div class='header__container'>
		<a class='header__logo' href="/">
			<img src="/logo_black_crop.png" alt="logo">
		</a>
	<div class="hamburger-menu">
		<span class="bar"></span>
		</div>
	<nav class='header__main-nav'>
		<HeaderLink class="nav_link" href="/blog">Blog</HeaderLink>
		<HeaderLink class="nav_link" href="/about">About</HeaderLink>
		<HeaderLink class="nav_link" href="/projects-writings">Project/Writings</HeaderLink>
		<HeaderLink class="nav_link" href="/subscribe">Subscribe</HeaderLink>
		<a class="nav_link" href={frontmatter.twitterLink} target="_blank">Twitter.</a>
	</nav>
	</div>
	<img  class='top-image' src="/circle-top-edited.png" alt="fosiil">
</header>


<script defer>
	const hamburgerMenu = document.querySelector('.hamburger-menu') 
	const navLinks = document.querySelector('.header__main-nav')
	const body = document.body;
	const header = document.querySelector('.header__container')


	hamburgerMenu.addEventListener('click', () => {
	const scrollY = window.scrollY;
	
  	hamburgerMenu.classList.toggle('is-open')
	navLinks.classList.toggle('hidden')
	body.classList.toggle('fixed')

	if (body.classList.contains('fixed')) {
    body.style.top = `-${scrollY}px`;
  	} else {
    const scrollY = parseInt(body.style.top || '0') * -1;
    body.style.position = '';
    body.style.top = '';
    window.scrollTo(0, scrollY);
  		}

	})


	let prevScrollpos = window.scrollY;
	window.onscroll = function() {
		let currentScrollPos = window.scrollY;
		if ((prevScrollpos < currentScrollPos) && (currentScrollPos > 250)) {
			header.style.top = "-95px";
		} else {
			header.style.top = "-0";
		}
		prevScrollpos = currentScrollPos;
		}



</script>
<style>

@media (max-width: 93rem) {


header {
	/* padding: 0 1rem;
	background-color: #fff; */
}

}

	.header__container {
		max-width: 93rem;
		margin: 0 auto;
		padding: 0.5rem 1rem;
		display: flex;
		background-color: #fff;
		gap: 1.8rem;
		align-items: flex-start;
		justify-content: space-between;
		transition: top 0.3s; /* Transition effect when sliding down (and up) */
		z-index: 1

	}



	.header__logo {
		height: 108px;

		& img {
			display: block;
			width: auto;
			height: 100%;
			object-fit: contain;
		}
	}

	.hamburger-menu {
	display: none;
    z-index: 100;
    cursor: pointer;
	position: relative;
	margin: auto 1rem;
    width: 24px;
    height: 18px;
    pointer-events: all;


    & .bar,
    & .bar:after {
        content: '';
        position: absolute;
        display: block;
        background-color: #000;
		height: 2px;
        width: 100%;
		transition: transform .3s ease-in-out;

    }
    & .bar {
        top: 0rem;
    }
    & .bar:after {
        top: 10px;
    }

	&.is-open {

        .bar {
          transform: rotate(45deg);
          top: 5px;

          &:after {
            top: 0;
            transform: rotate(-90deg);
          }
        }
      }


}


	.header__main-nav {
		display: flex;
		gap: 2rem;
		flex-wrap: wrap;
	}


	@media (max-width: 1000px) {

		.header__container {
		position: fixed;
		width: 100%;
		padding-right: 1rem;
		height: 80px;


	}


		.header__main-nav {
		align-items: flex-end;
		position: fixed;
		top: calc(80px);
		right: 0;
		width: 100%;
		height: calc(100svh - 80px + 1rem);
		z-index: 2000;
		background-color: #fff;
		gap: 1.5rem;
		flex-direction: column;
		touch-action: none;
		padding: 2rem;
		transform: translate(102%, 0);
		transition: transform .1s ease-in-out;


		&.hidden {
			transform: translate(0, 0);

		}
	}

	.hamburger-menu {
		display: block;

	}

		
	.header__logo {
		height: 70px;
		}
	}




	.nav_link {
		text-decoration: none;
		text-transform: lowercase;
		transition: text-decoration 1s ease-in-out;

		&:hover {
			text-decoration:underline;
		}

		&.active {
			font-weight: bolder;
			text-decoration:underline
		}
}


	
		.top-image {
			position: absolute;
			top: -15px;
			right: -60px;
			z-index: 1;
			rotate: 5deg;


			
		}

		@media (max-width: 1804px) {
			.top-image {
				rotate: 10deg;
				right: -100px;
			}
		}

		
		@media (max-width: 1604px) {
			.top-image {
				rotate: 10deg;
				right: -120px;
			}
		}

		@media (max-width: 1304px) {
			.top-image {
				rotate: 14deg;
				right: -140px;
			}
		}

		@media (max-width: 1000px) {
			.top-image {
				display: none;
			}
		}





</style>
